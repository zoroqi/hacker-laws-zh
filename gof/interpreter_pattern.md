---
aliases:
- Interpreter pattern
- 解释器模式
category:
- 设计模式
name: Interpreter pattern
tags:
- 设计模式/行为范例
- 解释器模式
- 程序/范例
wiki: https://en.wikipedia.org/wiki/Interpreter_pattern
zhname: 解释器模式
id: 20221001230515_342d972577a547cd
date: "2022-10-01"
---

# 解释器模式

给定一个语言，定义它的文法的一种表示，并定义一个解释器，这个解释器使用该表示来解释语言中的句子

适用性场景:

当有一个语言需要解释执行,并且你可将该语言中的句子表示为一个**抽象语法树时**，可使用解释器模式。而当存在以下情况时该模式效果最好：

* 该文法简单对于复杂的文法,文法的类层次变得庞大而无法管理。此时语法分析程序生成器这样的工具是更好的选择。它们无需构建抽象语法树即可解释表达式,这样可以节省空间而且还可能节省时间。
* 效率不是一个关键问题最高效的解释器通常不是通过直接解释语法分析树实现的,而是首先将它们转换成另一种形式。例如，正则表达式通常被转换成状态机。但即使在这种情况下,转换器仍可用解释器模式实现,该模式仍是有用的。

效果:

1. 易于改变和扩展文法因为该模式使用类来表示文法规则,你可使用继承来改变或扩展该文法。已有的表达式可被增量式地改变,而新的表达式可定义为旧表达式的变体。
2. 也易于实现文法定义抽象语法树中各个节点的类的实现大体类似。这些类易于直接编写，通常它们也可用一个编译器或语法分析程序生成器自动生成。
3. 复杂的文法难以维护解释器模式为文法中的每一条规则至少定义了一个类(使用BNF定义的文法规则需要更多的类)。因此包含许多规则的文法可能难以管理和维护。可应用其他的设计模式来缓解这一问题。但当文法非常复杂时,其他的技术如语法分析程序或编译器生成器更为合适。
4. 增加了新的解释表达式的方式解释器模式使得实现新表达式“计算”变得容易。例如,你可以在表达式类上定义一个新的操作以支持优美打印或表达式的类型检查。如果你经常创建新的解释表达式的方式,那么可以考虑使用 [[visitor_pattern|Visitor pattern]] 模式以避免修改这些代表文法的类。

